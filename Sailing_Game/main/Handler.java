package main;

import java.awt.Graphics;
import java.util.LinkedList;

public class Handler {

	public LinkedList<GameObject> object = new LinkedList<GameObject>();
	private Game game;
	private Camera cam;
	private double renderDistance = Game.WIDTH * 1.2f;
	
	public Handler(Game game) {
		this.game = game;
		cam = game.getCamera();
	}
	
	public void tick() {
		
		print();
		for(int i = 0; i < object.size(); i++) {
			object.get(i).tick();
			
		}
		
		//printNumberOfPlayersInHandler();
	}
	

	public void render(Graphics g) {
		if(cam == null) {
			cam = game.getCamera();
			return;
		}
		for(int i = 0; i < object.size(); i++) {
			GameObject temp = object.get(i);
			if(Game.magnitude(temp.getX() - cam.getX(), temp.getY() - cam.getY()) < renderDistance)
				temp.render(g);
		}
	}
	
	public void addObject(GameObject obj) {
		if(object.size() == 0) object.add(obj);
		
		for(int i = 0; i < object.size(); i++) {
			if(object.get(i).priority < obj.priority) {
				object.add(i, obj);
				return;
			}
		}
		object.add(object.size() - 1, obj);
	}
	
	public void removeObject(GameObject obj) {
		if(obj == null) return;
		object.remove(obj);
	}
	
	public void clear() {
		object.clear();
	}
	
	public void print() {
		for(int i = 0; i < object.size(); i++) {
			System.out.println(object.get(i).getId() + " ");
		}
	}
	
	public Game getGame() {
		return game;
	}
}
